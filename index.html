<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claude Terminal</title>
  <link rel="stylesheet" href="node_modules/@xterm/xterm/css/xterm.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Title Bar -->
  <div class="titlebar">
    <div class="titlebar-drag">
      <div class="titlebar-icon">
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
        </svg>
      </div>
      <span class="titlebar-title">Claude Terminal</span>
    </div>
    <!-- Usage Display -->
    <div class="titlebar-usage" id="titlebar-usage" title="Cliquez pour actualiser">
      <div class="usage-item" data-type="session">
        <span class="usage-label">Session</span>
        <div class="usage-bar-container">
          <div class="usage-bar" id="usage-bar-session" style="width: 0%"></div>
        </div>
        <span class="usage-percent" id="usage-percent-session">--%</span>
      </div>
      <div class="usage-item" data-type="weekly">
        <span class="usage-label">Weekly</span>
        <div class="usage-bar-container">
          <div class="usage-bar" id="usage-bar-weekly" style="width: 0%"></div>
        </div>
        <span class="usage-percent" id="usage-percent-weekly">--%</span>
      </div>
      <div class="usage-item" data-type="sonnet">
        <span class="usage-label">Sonnet</span>
        <div class="usage-bar-container">
          <div class="usage-bar" id="usage-bar-sonnet" style="width: 0%"></div>
        </div>
        <span class="usage-percent" id="usage-percent-sonnet">--%</span>
      </div>
    </div>
    <div class="titlebar-controls">
      <button class="titlebar-btn" id="btn-minimize">
        <svg viewBox="0 0 12 12"><rect y="5" width="12" height="2" fill="currentColor"/></svg>
      </button>
      <button class="titlebar-btn" id="btn-maximize">
        <svg viewBox="0 0 12 12"><rect x="1" y="1" width="10" height="10" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
      </button>
      <button class="titlebar-btn btn-close" id="btn-close">
        <svg viewBox="0 0 12 12"><path d="M1 1l10 10M11 1L1 11" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
      </button>
    </div>
  </div>

  <!-- Update Banner (GitHub Desktop style) -->
  <div class="update-banner" id="update-banner" style="display: none;">
    <div class="update-banner-content">
      <svg class="update-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.5-9.12 0-12.6 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12z"/>
      </svg>
      <span class="update-message" id="update-message">Une nouvelle version est disponible</span>
      <div class="update-progress-container" id="update-progress-container" style="display: none;">
        <div class="update-progress-bar" id="update-progress-bar"></div>
        <span class="update-progress-text" id="update-progress-text">0%</span>
      </div>
      <button class="update-btn" id="update-btn" style="display: none;">Redémarrer pour mettre à jour</button>
      <button class="update-dismiss" id="update-dismiss" title="Fermer">
        <svg viewBox="0 0 12 12"><path d="M1 1l10 10M11 1L1 11" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
      </button>
    </div>
  </div>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <nav class="nav-tabs">
        <button class="nav-tab active" data-tab="claude">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8h16v10zM6 10h2v2H6zm0 4h8v2H6zm10 0h2v2h-2zm-6-4h8v2h-8z"/>
          </svg>
          <span>Claude</span>
        </button>
        <button class="nav-tab" data-tab="skills">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
          </svg>
          <span>Skills</span>
        </button>
        <button class="nav-tab" data-tab="agents">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8 17.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM9.5 8c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8zm6.5 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
          </svg>
          <span>Agents</span>
        </button>
        <button class="nav-tab" data-tab="dashboard">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
          </svg>
          <span>Dashboard</span>
        </button>
        <button class="nav-tab" data-tab="mcp">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M17 16l-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5h-4z"/>
          </svg>
          <span>MCP</span>
        </button>
      </nav>
      <div class="sidebar-footer">
        <button class="notification-toggle active" id="btn-notifications" title="Notifications">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/>
          </svg>
          <span>Notifications</span>
        </button>
        <button class="settings-btn" id="btn-settings" title="Parametres">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
          </svg>
          <span>Parametres</span>
        </button>
        <span class="version" id="app-version"></span>
      </div>
    </div>

    <!-- Content Area -->
    <div class="content">
      <!-- Claude Tab -->
      <div class="tab-content active" id="tab-claude">
        <div class="claude-layout">
          <!-- Projects Panel -->
          <div class="projects-panel">
            <div class="panel-header">
              <h2>Projets</h2>
              <div class="panel-actions">
                <button class="btn-icon" id="btn-new-folder" title="Nouveau dossier">
                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z"/></svg>
                </button>
                <button class="btn-icon" id="btn-new-project" title="Nouveau projet">
                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                </button>
              </div>
            </div>
            <div class="projects-list" id="projects-list"></div>
          </div>

          <!-- Terminals Panel -->
          <div class="terminals-panel">
            <div class="terminals-header">
              <div class="terminals-filter" id="terminals-filter" style="display: none;">
                <span class="filter-label">Terminaux de</span>
                <span class="filter-project" id="filter-project-name"></span>

                <div class="filter-git-actions" id="filter-git-actions" style="display: none;">
                  <div class="filter-divider"></div>
                  <button class="filter-git-btn" id="filter-btn-pull" title="Git Pull">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v12"/><path d="M17 11l-5 5-5-5"/><path d="M5 21h14"/></svg>
                    Pull
                  </button>
                  <button class="filter-git-btn" id="filter-btn-push" title="Git Push">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 21V9"/><path d="M7 14l5-5 5 5"/><path d="M5 3h14"/></svg>
                    Push
                  </button>
                  <div class="filter-divider"></div>
                  <button class="filter-branch-btn" id="filter-btn-branch" title="Changer de branche">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="6" y1="3" x2="6" y2="15"/><circle cx="18" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><path d="M18 9a9 9 0 0 1-9 9"/></svg>
                    <span id="filter-branch-name">main</span>
                    <svg class="branch-arrow" viewBox="0 0 12 12"><path d="M3 5l3 3 3-3" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                  </button>
                </div>

                <button class="filter-clear" id="btn-show-all" title="Afficher tous les terminaux">
                  <svg viewBox="0 0 12 12"><path d="M1 1l10 10M11 1L1 11" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                </button>
              </div>

              <!-- Branch Dropdown -->
              <div class="branch-dropdown" id="branch-dropdown">
                <div class="branch-dropdown-header">
                  <span>Changer de branche</span>
                </div>
                <div class="branch-dropdown-list" id="branch-dropdown-list"></div>
              </div>
            </div>
            <div class="terminals-tabs" id="terminals-tabs"></div>
            <div class="terminals-container" id="terminals-container">
              <div class="empty-state" id="empty-terminals">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.89 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8h16v10z"/>
                </svg>
                <p>Selectionnez un projet et cliquez sur "Claude Code"</p>
                <p class="hint">Le terminal s'ouvrira ici</p>
              </div>
            </div>

            <!-- Project Detail View -->
            <div class="project-detail-view" id="project-detail-view" style="display: none;">
              <div class="project-detail-header">
                <div class="project-detail-info">
                  <div class="project-detail-icon" id="project-detail-icon"></div>
                  <div class="project-detail-text">
                    <h2 id="project-detail-name"></h2>
                    <span class="project-detail-path" id="project-detail-path"></span>
                  </div>
                </div>
                <button class="btn-close-detail" id="btn-close-detail" title="Fermer">
                  <svg viewBox="0 0 12 12"><path d="M1 1l10 10M11 1L1 11" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                </button>
              </div>

              <div class="project-detail-actions" id="project-detail-actions"></div>

              <div class="project-detail-content" id="project-detail-content">
                <!-- FiveM Console will be rendered here for FiveM projects -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Skills Tab -->
      <div class="tab-content" id="tab-skills">
        <div class="list-layout">
          <div class="list-header">
            <h2>Skills</h2>
            <button class="btn-primary" id="btn-new-skill">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
              Nouveau Skill
            </button>
          </div>
          <div class="list-container" id="skills-list"></div>
        </div>
      </div>

      <!-- Agents Tab -->
      <div class="tab-content" id="tab-agents">
        <div class="list-layout">
          <div class="list-header">
            <h2>Agents</h2>
            <button class="btn-primary" id="btn-new-agent">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
              Nouvel Agent
            </button>
          </div>
          <div class="list-container" id="agents-list"></div>
        </div>
      </div>

      <!-- Dashboard Tab -->
      <div class="tab-content" id="tab-dashboard">
        <div class="dashboard-layout">
          <div class="dashboard-sidebar">
            <div class="dashboard-sidebar-header">
              <h3>Projets</h3>
            </div>
            <div class="dashboard-projects-list" id="dashboard-projects-list"></div>
          </div>
          <div class="dashboard-main">
            <div class="dashboard-content" id="dashboard-content">
              <div class="dashboard-empty">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
                <p>Selectionnez un projet pour voir son dashboard</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- MCP Tab -->
      <div class="tab-content" id="tab-mcp">
        <div class="mcp-layout">
          <div class="mcp-main">
            <div class="list-header">
              <h2>Serveurs MCP</h2>
              <button class="btn-primary" id="btn-new-mcp">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                Nouveau MCP
              </button>
            </div>
            <div class="mcp-list" id="mcp-list"></div>
          </div>
          <div class="mcp-logs-panel" id="mcp-logs-panel">
            <div class="mcp-logs-header">
              <div class="mcp-logs-title">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8h16v10z"/></svg>
                <span>Logs</span>
                <span class="mcp-logs-name" id="mcp-logs-name"></span>
              </div>
              <div class="mcp-logs-actions">
                <button class="btn-icon btn-small" id="btn-clear-logs" title="Effacer les logs">
                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                </button>
                <button class="btn-icon btn-small" id="btn-toggle-logs" title="Reduire">
                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
                </button>
              </div>
            </div>
            <div class="mcp-logs-content" id="mcp-logs-content">
              <div class="mcp-logs-empty">Selectionnez un MCP pour voir ses logs</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="modal">
      <div class="modal-header">
        <h3 id="modal-title">Titre</h3>
        <button class="btn-icon modal-close" id="modal-close">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </div>
      <div class="modal-body" id="modal-body"></div>
      <div class="modal-footer" id="modal-footer"></div>
    </div>
  </div>

  <!-- Quick Picker Modal -->
  <div class="quick-picker-overlay" id="quick-picker-overlay">
    <div class="quick-picker">
      <div class="quick-picker-search">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
        <input type="text" id="quick-picker-input" placeholder="Rechercher un projet..." autocomplete="off">
        <span class="quick-picker-shortcut">Ctrl+Shift+P</span>
      </div>
      <div class="quick-picker-list" id="quick-picker-list"></div>
      <div class="quick-picker-footer">
        <span><kbd>↑↓</kbd> Naviguer</span>
        <span><kbd>Enter</kbd> Ouvrir</span>
        <span><kbd>Esc</kbd> Fermer</span>
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div class="context-menu" id="context-menu"></div>

  <!-- Input Modal -->
  <div class="modal-overlay" id="input-modal">
    <div class="modal-content">
      <div class="modal-header" id="input-modal-title">Titre</div>
      <input type="text" class="modal-input" id="input-modal-input" placeholder="">
      <div class="modal-actions">
        <button class="btn-secondary" id="input-modal-cancel">Annuler</button>
        <button class="btn-primary" id="input-modal-confirm">Confirmer</button>
      </div>
    </div>
  </div>

  <!-- Create Skill/Agent Modal -->
  <div class="modal-overlay" id="create-modal">
    <div class="modal create-modal">
      <div class="modal-header">
        <h3 id="create-modal-title">Nouveau Skill</h3>
        <button class="btn-icon modal-close" id="create-modal-close">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="create-modal-intro">
          <p>Decrivez ce que vous voulez creer et Claude generera le code pour vous.</p>
        </div>
        <div class="create-modal-field">
          <label for="create-modal-description">Description</label>
          <textarea id="create-modal-description" placeholder="Ex: Un skill qui genere des tests unitaires pour du code TypeScript en utilisant Vitest..." rows="4"></textarea>
        </div>
        <div class="create-modal-field">
          <label>Projet cible</label>
          <select id="create-modal-project">
            <option value="">Selectionnez un projet...</option>
          </select>
          <p class="field-hint">Le skill/agent sera cree dans le terminal de ce projet</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="create-modal-cancel">Annuler</button>
        <button class="btn-primary btn-create-with-claude" id="create-modal-submit">
          <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
          Creer avec Claude
        </button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
